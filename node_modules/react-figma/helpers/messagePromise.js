"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var operators_1 = require("rxjs/operators");
var nanoid = require("nanoid/non-secure");
var rxjs_1 = require("rxjs");
var $subject = new rxjs_1.Subject();
exports.subscribeOnMessages = function (message) {
    $subject.next(message);
};
exports.messagePromise = function (value) {
    var id = nanoid();
    var $responseMessage = $subject.pipe(operators_1.filter(function (message) { return message.id === id; }), operators_1.map(function (message) { return message.value; }));
    figma.ui.postMessage({ value: value, id: id });
    return new Promise(function (resolve) {
        $responseMessage.subscribe(resolve);
    });
};
//# sourceMappingURL=messagePromise.js.map